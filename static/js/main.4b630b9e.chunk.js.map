{"version":3,"sources":["modules/recognition/recognition.ts","modules/deezer/Player.tsx","modules/deezer/api/api.ts","components/card/Card.tsx","App.tsx","modules/deezer/index.ts","index.tsx"],"names":["Recognition","_recognition","_commandsMap","Map","_eventListenersMap","setLanguage","lang","setAlternatives","alternativesNumber","maxAlternatives","setInterimResults","interimResults","setContinuous","continuous","_initializeEventHandlers","forEach","type","addEventListener","event","_getEventListener","results","resultIndex","result","_getCommandCallback","transcript","start","get","toLocaleLowerCase","noop","addCommand","command","set","trigger","callback","addCommands","commands","listener","removeEventListener","delete","abort","stop","SpeechRecognition","window","webkitSpeechRecognition","Error","this","Volume","value","Box","d","alignItems","as","FaVolumeUp","paddingRight","Slider","width","onChange","DZ","player","setVolume","Controls","isPlaying","IconButton","variant","aria-label","icon","FaBackward","onClick","prev","FaPause","FaPlay","pause","play","FaForward","next","Song","details","px","flexGrow","fontWeight","fontSize","title","artist","name","TrackProgress","position","duration","progressValue","seek","Player","props","useDeezerSubscriptions","track","volume","useEffect","playAlbum","useState","getVolume","setIsPlaying","setPosition","setDuration","getCurrentTrack","setTrack","useLayoutEffect","Event","subscribe","ApiEntity","apiPath","_apiPath","_callToAPI","path","method","data","Promise","resolve","params","res","response","error","body","filter","negate","isNil","curriedFn","curry","api","length","reduce","fn","arg","e","_buildUrl","TrackEntity","fetchById","id","AlbumEntity","fetchTracks","RadioEntity","fetchStations","GenreEntity","fetchGenres","SearchEntity","searchEverything","query","searchTracks","ArtistEntity","fetchAlbums","fetchRelatedArtists","album","radio","genre","search","Card","onPlay","description","src","boxProps","w","borderWidth","rounded","overflow","boxShadow","isRound","m","size","bottom","Image","alt","flexDirection","p","App","albums","setAlbums","then","r","ThemeProvider","CSSReset","mb","flexWrap","map","cover_medium","key","left","right","bg","defaultProps","appId","channelUrl","onload","dzRoot","document","createElement","appendChild","script","head","dzAsyncInit","init","initDeezer","process","location","href","ReactDOM","render","getElementById","recognition","console","log"],"mappings":"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","file":"static/js/main.4b630b9e.chunk.js","sourcesContent":["import { noop } from 'lodash-es'\n\nimport {\n  ICommand,\n  IRecognition,\n  ISpeechEventType,\n  ISpeechEventListener,\n} from './types'\n\nconst DEFAULT_LANGUAGE = 'en-US'\nconst DEFAULT_MAX_ALTERNATIVES = 5\n\nexport class Recognition implements IRecognition {\n  private _recognition: SpeechRecognition\n  private _commandsMap = new Map<string, () => void>() //TODO: commands structure, typing\n  private _eventListenersMap = new Map<ISpeechEventType, ISpeechEventListener>()\n\n  constructor() {\n    const SpeechRecognition = (window as any).webkitSpeechRecognition\n\n    if (!SpeechRecognition) {\n      throw new Error('Speech recognition is not supported by your browser')\n    }\n\n    this._recognition = new SpeechRecognition()\n\n    this._recognition.maxAlternatives = DEFAULT_MAX_ALTERNATIVES\n    this._recognition.lang = DEFAULT_LANGUAGE\n    this._recognition.interimResults = false\n    this._recognition.continuous = false\n\n    this._initializeEventHandlers()\n  }\n\n  setLanguage = (lang: string) => {\n    this._recognition.lang = lang\n    return this\n  }\n\n  setAlternatives = (alternativesNumber: number) => {\n    this._recognition.maxAlternatives = alternativesNumber\n    return this\n  }\n\n  setInterimResults = (interimResults: boolean) => {\n    this._recognition.interimResults = interimResults\n    return this\n  }\n\n  setContinuous = (continuous: boolean) => {\n    this._recognition.continuous = continuous\n    return this\n  }\n\n  private _initializeEventHandlers = () => {\n    ;[\n      'speechstart',\n      'speechend',\n      'soundstart',\n      'soundend',\n      'nomatch',\n      'error',\n      'audiostart',\n      'audioend',\n      'result',\n      'start',\n      'end',\n    ].forEach(type =>\n      this._recognition.addEventListener(type, event =>\n        this._getEventListener(type as ISpeechEventType)(event)\n      )\n    )\n\n    this._recognition.addEventListener('result', event => {\n      const results = event.results[event.resultIndex]\n\n      for (const result of results) {\n        this._getCommandCallback(result.transcript)()\n      }\n    })\n\n    this._recognition.addEventListener('end', () => {\n      this.start()\n    })\n  }\n\n  private _getCommandCallback = (result: string) => {\n    return (\n      this._commandsMap.get(result.toLocaleLowerCase(this._recognition.lang)) ||\n      noop\n    )\n  }\n\n  private _getEventListener = (event: ISpeechEventType) => {\n    return this._eventListenersMap.get(event) || noop\n  }\n\n  addCommand = (command: ICommand) => {\n    this._commandsMap.set(\n      command.trigger.toLocaleLowerCase(this._recognition.lang),\n      command.callback\n    )\n    return this\n  }\n\n  addCommands = (commands: ICommand[]) => {\n    commands.forEach(this.addCommand)\n    return this\n  }\n\n  addEventListener = (\n    type: ISpeechEventType,\n    listener: ISpeechEventListener\n  ) => {\n    this._eventListenersMap.set(type, listener)\n  }\n\n  removeEventListener = (type: ISpeechEventType) => {\n    this._eventListenersMap.delete(type)\n  }\n\n  start = () => {\n    this._recognition.start()\n  }\n\n  abort = () => {\n    this._recognition.abort()\n  }\n\n  stop = () => {\n    this._recognition.stop()\n  }\n}\n","import React, { useState, useLayoutEffect, useEffect } from 'react'\nimport {\n  Slider,\n  SliderFilledTrack,\n  SliderThumb,\n  SliderTrack,\n  Box,\n  IconButton,\n  BoxProps,\n} from '@chakra-ui/core'\nimport {\n  FaBackward,\n  FaForward,\n  FaPlay,\n  FaPause,\n  FaVolumeUp,\n} from 'react-icons/fa'\n\nconst Volume: React.FC<{ value: number }> = ({ value }) => (\n  <Box d=\"flex\" alignItems=\"center\">\n    <Box as={FaVolumeUp} paddingRight=\"1\" />\n\n    <Box d=\"flex\" alignItems=\"center\">\n      <Slider width=\"24\" value={value} onChange={DZ.player.setVolume}>\n        <SliderTrack />\n        <SliderFilledTrack />\n        <SliderThumb />\n      </Slider>\n    </Box>\n  </Box>\n)\n\nconst Controls: React.FC<{ isPlaying: boolean }> = ({ isPlaying }) => (\n  <Box>\n    <IconButton\n      variant=\"outline\"\n      aria-label=\"previous track\"\n      icon={FaBackward}\n      onClick={DZ.player.prev}\n    />\n    <IconButton\n      variant=\"outline\"\n      aria-label=\"play/pause track\"\n      icon={isPlaying ? FaPause : FaPlay}\n      onClick={isPlaying ? DZ.player.pause : DZ.player.play}\n    />\n    <IconButton\n      variant=\"outline\"\n      aria-label=\"next track\"\n      icon={FaForward}\n      onClick={DZ.player.next}\n    />\n  </Box>\n)\n\nconst Song: React.FC<{ details: DeezerSdk.Track }> = ({ details }) => (\n  <Box px=\"2\" flexGrow={1}>\n    <Box fontWeight=\"bold\" fontSize=\"md\">\n      {details?.title}\n    </Box>\n    <Box fontSize=\"xs\">{details?.artist?.name}</Box>\n  </Box>\n)\n\nconst TrackProgress: React.FC<{ position: number; duration: number }> = ({\n  position,\n  duration,\n}) => {\n  const progressValue = duration ? (position / duration) * 100 : 0\n\n  return (\n    <Slider onChange={DZ.player.seek} value={progressValue}>\n      <SliderTrack />\n      <SliderFilledTrack />\n      <SliderThumb />\n    </Slider>\n  )\n}\n\nexport const Player: React.FC<BoxProps> = props => {\n  const {\n    track,\n    volume,\n    isPlaying,\n    position,\n    duration,\n  } = useDeezerSubscriptions()\n\n  //TODO: remove in future\n  useEffect(() => {\n    DZ.player.playAlbum(7102365, false)\n  }, [])\n\n  return (\n    <Box {...props}>\n      <TrackProgress position={position} duration={duration} />\n\n      <Box d=\"flex\" alignItems=\"center\">\n        <Controls isPlaying={isPlaying} />\n        <Song details={track} />\n        <Volume value={volume} />\n      </Box>\n    </Box>\n  )\n}\n\nconst useDeezerSubscriptions = () => {\n  const [volume, setVolume] = useState<number>(DZ.player.getVolume())\n  const [isPlaying, setIsPlaying] = useState<boolean>(DZ.player.isPlaying())\n  const [position, setPosition] = useState<number>(0)\n  const [duration, setDuration] = useState<number>(0)\n  const [track, setTrack] = useState<DeezerSdk.Track>(\n    DZ.player.getCurrentTrack()\n  )\n\n  useLayoutEffect(() => {\n    DZ.Event.subscribe('volume_changed', setVolume)\n    DZ.Event.subscribe('current_track', ({ track }) => setTrack(track))\n    DZ.Event.subscribe('player_play', () => setIsPlaying(true))\n    DZ.Event.subscribe('player_paused', () => setIsPlaying(false))\n    DZ.Event.subscribe('player_position', ([position, duration]) => {\n      setPosition(position)\n      setDuration(duration)\n    })\n  }, [])\n\n  return { track, volume, isPlaying, position, duration }\n}\n","import { curry, isNil, negate } from 'lodash'\n\nimport {\n  Track,\n  Album,\n  Search,\n  Radio,\n  Genre,\n  Artist,\n  ApiResponse,\n} from './types'\n\nclass ApiEntity {\n  protected _apiPath: string\n\n  constructor(apiPath: string) {\n    this._apiPath = apiPath\n  }\n\n  protected _callToAPI = <TResponse>(\n    path: string,\n    method?: DeezerSdk.HttpMethod,\n    data?: any\n  ) => {\n    return new Promise<ApiResponse<TResponse>>(resolve => {\n      const resolver = (res: any) => {\n        const response = res.error ? { error: res.error } : { body: res }\n        resolve(response)\n      }\n\n      const params = [path, method, data, resolver].filter(negate(isNil))\n      const curriedFn = curry(DZ.api, params.length)\n\n      try {\n        params.reduce((fn, arg) => fn(arg), curriedFn)\n      } catch (e) {\n        resolve({ error: e })\n      }\n    })\n  }\n\n  protected _buildUrl = (path?: string | number) =>\n    path ? `${this._apiPath}/${path}` : this._apiPath\n}\n\nclass TrackEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Track>(this._buildUrl(id))\n  }\n}\n\nclass AlbumEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Album>(this._buildUrl(id))\n  }\n\n  fetchTracks = (id: number) => {\n    return this._callToAPI<Pick<Album, 'tracks'>>(\n      this._buildUrl(`${id}/tracks`)\n    )\n  }\n}\n\nclass RadioEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Radio>(this._buildUrl(id))\n  }\n\n  fetchStations = () => {\n    return this._callToAPI<Search<Radio>>(this._buildUrl())\n  }\n\n  fetchTracks = (id: number) => {\n    return this._callToAPI<Search<Track>>(this._buildUrl(`${id}/tracks`))\n  }\n}\n\nclass GenreEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Radio>(this._buildUrl(id))\n  }\n\n  fetchGenres = () => {\n    return this._callToAPI<Search<Genre>>(this._buildUrl())\n  }\n}\n\nclass SearchEntity extends ApiEntity {\n  searchEverything = (query: string) => {\n    return this._callToAPI<Search<Track | Artist | Album>>(\n      this._buildUrl(`track?q=${query}`)\n    )\n  }\n\n  searchTracks = (query: string) => {\n    return this._callToAPI<Search<Track>>(this._buildUrl(`track?q=${query}`))\n  }\n}\n\nclass ArtistEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Artist>(this._buildUrl(id))\n  }\n\n  fetchAlbums = (id: number) => {\n    return this._callToAPI<Search<Album>>(this._buildUrl(`${id}/albums`))\n  }\n\n  fetchRelatedArtists = (id: number) => {\n    return this._callToAPI<Search<Artist>>(this._buildUrl(`${id}/related`))\n  }\n}\n\nexport const api = {\n  track: new TrackEntity('track'),\n  album: new AlbumEntity('album'),\n  radio: new RadioEntity('radio'),\n  genre: new GenreEntity('genre'),\n  search: new SearchEntity('search'),\n  artist: new ArtistEntity('artist'),\n}\n","import React from 'react'\nimport { Box, Image, BoxProps, IconButton } from '@chakra-ui/core'\nimport { FaPlay } from 'react-icons/fa'\nimport { noop } from 'lodash-es'\n\ntype CardProps = BoxProps & {\n  onPlay: () => void\n  title: string\n  description?: string\n  src?: string\n}\n\nexport const Card: React.FC<CardProps> = ({\n  id,\n  title,\n  onPlay,\n  description,\n  src,\n  ...boxProps\n}) => (\n  <Box\n    {...boxProps}\n    w=\"3xs\"\n    borderWidth=\"1px\"\n    rounded=\"lg\"\n    overflow=\"hidden\"\n    boxShadow=\"sm\"\n  >\n    <Box position=\"relative\">\n      <IconButton\n        onClick={onPlay}\n        aria-label={`play ${title}`}\n        icon={FaPlay}\n        isRound={true}\n        m=\"2\"\n        size=\"sm\"\n        bottom=\"0\"\n        position=\"absolute\"\n      />\n      <Image src={src} alt={title} />\n    </Box>\n    <Box d=\"flex\" flexDirection=\"column\" p=\"1\">\n      <Box fontWeight=\"bold\">{title}</Box>\n      {description && <Box fontSize=\"sm\">{description}</Box>}\n    </Box>\n  </Box>\n)\n\nCard.defaultProps = {\n  onPlay: noop,\n}\n","import React, { useEffect, useState } from 'react'\nimport { ThemeProvider, Box, CSSReset } from '@chakra-ui/core'\n\nimport { Player, api } from './modules/deezer'\nimport { Album } from './modules/deezer/api/types'\nimport { Card } from './components/card'\n\nexport function App() {\n  const [albums, setAlbums] = useState<Array<Album>>([])\n\n  useEffect(() => {\n    api.artist.fetchAlbums(8506054).then(r => setAlbums(r.body?.data || []))\n  }, [])\n\n  return (\n    <ThemeProvider>\n      <CSSReset />\n      <Box mb=\"20\" d=\"flex\" flexWrap=\"wrap\">\n        {albums.map(({ id, cover_medium, title }) => (\n          <Card\n            key={id}\n            title={title}\n            src={cover_medium}\n            onPlay={() => DZ.player.playAlbum(id)}\n            m=\"3\"\n          />\n        ))}\n      </Box>\n      <Player position=\"fixed\" bottom=\"0\" left=\"0\" right=\"0\" p=\"2\" bg=\"white\" />\n    </ThemeProvider>\n  )\n}\n","type InitOptions = {\n  appId: string\n  channelUrl: string\n  onload: () => void\n}\n\nconst DEEZER_SDK_CDN_LINK = 'https://e-cdns-files.dzcdn.net/js/min/dz.js'\nconst DEEZER_CONTAINER_ID = 'dz-root'\n\nconst initDeezer = ({ appId, channelUrl, onload }: InitOptions) => {\n  const dzRoot = document.createElement('div')\n\n  dzRoot.id = DEEZER_CONTAINER_ID\n  document.body.appendChild(dzRoot)\n\n  const script = document.createElement('script')\n\n  script.src = DEEZER_SDK_CDN_LINK\n\n  document.head.appendChild(script)\n  ;(window as any).dzAsyncInit = () => {\n    DZ.init({\n      appId,\n      channelUrl,\n      player: {\n        onload,\n      },\n    })\n  }\n}\n\nexport { Player } from './Player'\nexport { api } from './api'\n\nexport { initDeezer }\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Recognition } from './modules/recognition'\nimport { initDeezer } from './modules/deezer'\n\nimport { App } from './App'\n\nconst appId = process.env.REACT_APP_DEEZER_APP_ID || ''\nconst channelUrl = window.location.href + 'channel.html' //TODO: May cause some routing issues in future, but for now it's okay\n\ninitDeezer({\n  appId,\n  channelUrl,\n  onload: () => {\n    ReactDOM.render(<App />, document.getElementById('root'))\n\n    const recognition = new Recognition()\n      .addCommand({ trigger: 'play', callback: DZ.player.play })\n      .addCommand({ trigger: 'stop', callback: DZ.player.pause })\n      .addCommand({ trigger: 'next', callback: DZ.player.next })\n      .addCommand({ trigger: 'previous', callback: DZ.player.prev })\n      .addCommand({\n        trigger: 'volume up',\n        callback: () => DZ.player.setVolume(DZ.player.getVolume() + 20),\n      })\n      .addCommand({\n        trigger: 'volume down',\n        callback: () => DZ.player.setVolume(DZ.player.getVolume() - 20),\n      })\n\n    recognition.addEventListener('result', event => {\n      console.log(event)\n    })\n\n    recognition.start()\n  },\n})\n"],"sourceRoot":""}