{"version":3,"sources":["modules/recognition/recognition.ts","modules/deezer/Player.tsx","modules/deezer/api/api.ts","components/card/Card.tsx","App.tsx","modules/deezer/index.ts","index.tsx"],"names":["Recognition","_recognition","_commandsMap","Map","_eventListenersMap","setLanguage","lang","setAlternatives","alternativesNumber","maxAlternatives","setInterimResults","interimResults","setContinuous","continuous","_initializeEventHandlers","forEach","type","addEventListener","event","_getEventListener","results","resultIndex","result","_getCommandCallback","transcript","start","get","toLocaleLowerCase","noop","addCommand","command","set","trigger","callback","addCommands","commands","listener","removeEventListener","delete","abort","stop","SpeechRecognition","window","webkitSpeechRecognition","Error","this","Volume","value","Box","d","alignItems","as","FaVolumeUp","paddingRight","Slider","width","onChange","DZ","player","setVolume","Controls","isPlaying","IconButton","variant","aria-label","icon","FaBackward","onClick","prev","FaPause","FaPlay","pause","play","FaForward","next","Song","details","px","flexGrow","fontWeight","fontSize","title","artist","name","TrackProgress","position","duration","progressValue","seek","Player","props","useDeezerSubscriptions","track","volume","useEffect","playAlbum","useState","getVolume","setIsPlaying","setPosition","setDuration","getCurrentTrack","setTrack","useLayoutEffect","Event","subscribe","ApiEntity","apiPath","_apiPath","_callToAPI","path","method","data","Promise","resolve","reject","params","filter","negate","isNil","curriedFn","curry","api","length","reduce","fn","arg","e","_buildUrl","TrackEntity","fetchById","id","AlbumEntity","fetchAlbumTracks","RadioEntity","fetchStations","fetchStationTracks","GenreEntity","fetchGenres","SearchEntity","searchEverything","query","searchTracks","ArtistEntity","fetchArtistAlbums","fetchRelatedArtists","album","radio","genre","search","Card","description","src","boxProps","w","borderWidth","rounded","overflow","Image","alt","flexDirection","p","App","tracks","setTracks","then","r","ThemeProvider","CSSReset","flexWrap","map","m","key","cover_medium","appId","channelUrl","onload","dzRoot","document","createElement","body","appendChild","script","head","dzAsyncInit","init","initDeezer","process","location","href","ReactDOM","render","getElementById","recognition","console","log"],"mappings":"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","file":"static/js/main.ee915e0a.chunk.js","sourcesContent":["import { noop } from 'lodash-es'\n\nimport {\n  ICommand,\n  IRecognition,\n  ISpeechEventType,\n  ISpeechEventListener,\n} from './types'\n\nconst DEFAULT_LANGUAGE = 'en-US'\nconst DEFAULT_MAX_ALTERNATIVES = 5\n\nexport class Recognition implements IRecognition {\n  private _recognition: SpeechRecognition\n  private _commandsMap = new Map<string, () => void>() //TODO: commands structure, typing\n  private _eventListenersMap = new Map<ISpeechEventType, ISpeechEventListener>()\n\n  constructor() {\n    const SpeechRecognition = (window as any).webkitSpeechRecognition\n\n    if (!SpeechRecognition) {\n      throw new Error('Speech recognition is not supported by your browser')\n    }\n\n    this._recognition = new SpeechRecognition()\n\n    this._recognition.maxAlternatives = DEFAULT_MAX_ALTERNATIVES\n    this._recognition.lang = DEFAULT_LANGUAGE\n    this._recognition.interimResults = false\n    this._recognition.continuous = false\n\n    this._initializeEventHandlers()\n  }\n\n  setLanguage = (lang: string) => {\n    this._recognition.lang = lang\n    return this\n  }\n\n  setAlternatives = (alternativesNumber: number) => {\n    this._recognition.maxAlternatives = alternativesNumber\n    return this\n  }\n\n  setInterimResults = (interimResults: boolean) => {\n    this._recognition.interimResults = interimResults\n    return this\n  }\n\n  setContinuous = (continuous: boolean) => {\n    this._recognition.continuous = continuous\n    return this\n  }\n\n  private _initializeEventHandlers = () => {\n    ;[\n      'speechstart',\n      'speechend',\n      'soundstart',\n      'soundend',\n      'nomatch',\n      'error',\n      'audiostart',\n      'audioend',\n      'result',\n      'start',\n      'end',\n    ].forEach(type =>\n      this._recognition.addEventListener(type, event =>\n        this._getEventListener(type as ISpeechEventType)(event)\n      )\n    )\n\n    this._recognition.addEventListener('result', event => {\n      const results = event.results[event.resultIndex]\n\n      for (const result of results) {\n        this._getCommandCallback(result.transcript)()\n      }\n    })\n\n    this._recognition.addEventListener('end', () => {\n      this.start()\n    })\n  }\n\n  private _getCommandCallback = (result: string) => {\n    return (\n      this._commandsMap.get(result.toLocaleLowerCase(this._recognition.lang)) ||\n      noop\n    )\n  }\n\n  private _getEventListener = (event: ISpeechEventType) => {\n    return this._eventListenersMap.get(event) || noop\n  }\n\n  addCommand = (command: ICommand) => {\n    this._commandsMap.set(\n      command.trigger.toLocaleLowerCase(this._recognition.lang),\n      command.callback\n    )\n    return this\n  }\n\n  addCommands = (commands: ICommand[]) => {\n    commands.forEach(this.addCommand)\n    return this\n  }\n\n  addEventListener = (\n    type: ISpeechEventType,\n    listener: ISpeechEventListener\n  ) => {\n    this._eventListenersMap.set(type, listener)\n  }\n\n  removeEventListener = (type: ISpeechEventType) => {\n    this._eventListenersMap.delete(type)\n  }\n\n  start = () => {\n    this._recognition.start()\n  }\n\n  abort = () => {\n    this._recognition.abort()\n  }\n\n  stop = () => {\n    this._recognition.stop()\n  }\n}\n","import React, { useState, useLayoutEffect, useEffect } from 'react'\nimport {\n  Slider,\n  SliderFilledTrack,\n  SliderThumb,\n  SliderTrack,\n  Box,\n  IconButton,\n  BoxProps,\n} from '@chakra-ui/core'\nimport {\n  FaBackward,\n  FaForward,\n  FaPlay,\n  FaPause,\n  FaVolumeUp,\n} from 'react-icons/fa'\n\nconst Volume: React.FC<{ value: number }> = ({ value }) => (\n  <Box d=\"flex\" alignItems=\"center\">\n    <Box as={FaVolumeUp} paddingRight=\"1\" />\n\n    <Box d=\"flex\" alignItems=\"center\">\n      <Slider width=\"24\" value={value} onChange={DZ.player.setVolume}>\n        <SliderTrack />\n        <SliderFilledTrack />\n        <SliderThumb />\n      </Slider>\n    </Box>\n  </Box>\n)\n\nconst Controls: React.FC<{ isPlaying: boolean }> = ({ isPlaying }) => (\n  <Box>\n    <IconButton\n      variant=\"outline\"\n      aria-label=\"previous track\"\n      icon={FaBackward}\n      onClick={DZ.player.prev}\n    />\n    <IconButton\n      variant=\"outline\"\n      aria-label=\"play/pause track\"\n      icon={isPlaying ? FaPause : FaPlay}\n      onClick={isPlaying ? DZ.player.pause : DZ.player.play}\n    />\n    <IconButton\n      variant=\"outline\"\n      aria-label=\"next track\"\n      icon={FaForward}\n      onClick={DZ.player.next}\n    />\n  </Box>\n)\n\nconst Song: React.FC<{ details: DeezerSdk.Track }> = ({ details }) => (\n  <Box px=\"2\" flexGrow={1}>\n    <Box fontWeight=\"bold\" fontSize=\"md\">\n      {details?.title}\n    </Box>\n    <Box fontSize=\"xs\">{details?.artist?.name}</Box>\n  </Box>\n)\n\nconst TrackProgress: React.FC<{ position: number; duration: number }> = ({\n  position,\n  duration,\n}) => {\n  const progressValue = duration ? (position / duration) * 100 : 0\n\n  return (\n    <Slider onChange={DZ.player.seek} value={progressValue}>\n      <SliderTrack />\n      <SliderFilledTrack />\n      <SliderThumb />\n    </Slider>\n  )\n}\n\nexport const Player: React.FC<BoxProps> = props => {\n  const {\n    track,\n    volume,\n    isPlaying,\n    position,\n    duration,\n  } = useDeezerSubscriptions()\n\n  //TODO: remove in future\n  useEffect(() => {\n    DZ.player.playAlbum(7102365, false)\n  }, [])\n\n  return (\n    <Box {...props}>\n      <TrackProgress position={position} duration={duration} />\n\n      <Box d=\"flex\" alignItems=\"center\">\n        <Controls isPlaying={isPlaying} />\n        <Song details={track} />\n        <Volume value={volume} />\n      </Box>\n    </Box>\n  )\n}\n\nconst useDeezerSubscriptions = () => {\n  const [volume, setVolume] = useState<number>(DZ.player.getVolume())\n  const [isPlaying, setIsPlaying] = useState<boolean>(DZ.player.isPlaying())\n  const [position, setPosition] = useState<number>(0)\n  const [duration, setDuration] = useState<number>(0)\n  const [track, setTrack] = useState<DeezerSdk.Track>(\n    DZ.player.getCurrentTrack()\n  )\n\n  useLayoutEffect(() => {\n    DZ.Event.subscribe('volume_changed', setVolume)\n    DZ.Event.subscribe('current_track', ({ track }) => setTrack(track))\n    DZ.Event.subscribe('player_play', () => setIsPlaying(true))\n    DZ.Event.subscribe('player_paused', () => setIsPlaying(false))\n    DZ.Event.subscribe('player_position', ([position, duration]) => {\n      setPosition(position)\n      setDuration(duration)\n    })\n  }, [])\n\n  return { track, volume, isPlaying, position, duration }\n}\n","import { curry, isNil, negate } from 'lodash'\n\nimport { ApiError, Track, Album, Search, Radio, Genre, Artist } from './types'\n\nclass ApiEntity {\n  protected _apiPath: string\n\n  constructor(apiPath: string) {\n    this._apiPath = apiPath\n  }\n\n  protected _callToAPI = <TResponse>(\n    path: string,\n    method?: DeezerSdk.HttpMethod,\n    data?: any\n  ) => {\n    return new Promise<TResponse | ApiError>((resolve, reject) => {\n      const params = [path, method, data, resolve].filter(negate(isNil))\n      const curriedFn = curry(DZ.api, params.length)\n\n      try {\n        params.reduce((fn, arg) => fn(arg), curriedFn)\n      } catch (e) {\n        reject(e)\n      }\n    })\n  }\n\n  protected _buildUrl = (path?: string | number) =>\n    path ? `${this._apiPath}/${path}` : this._apiPath\n}\n\nclass TrackEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Track>(this._buildUrl(id))\n  }\n}\n\nclass AlbumEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Album>(this._buildUrl(id))\n  }\n\n  fetchAlbumTracks = (id: number) => {\n    return this._callToAPI<Pick<Album, 'tracks'>>(\n      this._buildUrl(`${id}/tracks`)\n    )\n  }\n}\n\nclass RadioEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Radio>(this._buildUrl(id))\n  }\n\n  fetchStations = () => {\n    return this._callToAPI<Search<Radio>>(this._buildUrl())\n  }\n\n  fetchStationTracks = (id: number) => {\n    return this._callToAPI<Search<Track>>(this._buildUrl(`${id}/tracks`))\n  }\n}\n\nclass GenreEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Radio>(this._buildUrl(id))\n  }\n\n  fetchGenres = () => {\n    return this._callToAPI<Search<Genre>>(this._buildUrl())\n  }\n}\n\nclass SearchEntity extends ApiEntity {\n  searchEverything = (query: string) => {\n    return this._callToAPI<Search<Track | Artist | Album>>(\n      this._buildUrl(`track?q=${query}`)\n    )\n  }\n\n  searchTracks = (query: string) => {\n    return this._callToAPI<Search<Track>>(this._buildUrl(`track?q=${query}`))\n  }\n}\n\nclass ArtistEntity extends ApiEntity {\n  fetchById = (id: number) => {\n    return this._callToAPI<Artist>(this._buildUrl(id))\n  }\n\n  fetchArtistAlbums = (id: number) => {\n    return this._callToAPI<Search<Album>>(this._buildUrl(`${id}/albums`))\n  }\n\n  fetchRelatedArtists = (id: number) => {\n    return this._callToAPI<Search<Artist>>(this._buildUrl(`${id}/related`))\n  }\n}\n\nexport const api = {\n  track: new TrackEntity('track'),\n  album: new AlbumEntity('album'),\n  radio: new RadioEntity('radio'),\n  genre: new GenreEntity('genre'),\n  search: new SearchEntity('search'),\n  artist: new ArtistEntity('artist'),\n}\n","import React from 'react'\nimport { Box, Image, BoxProps } from '@chakra-ui/core'\n\ntype CardProps = {\n  title: string\n  description?: string\n  src?: string\n} & BoxProps\n\nexport const Card: React.FC<CardProps> = ({\n  title,\n  description,\n  src,\n  ...boxProps\n}) => (\n  <Box {...boxProps} w=\"3xs\" borderWidth=\"1px\" rounded=\"lg\" overflow=\"hidden\">\n    <Image src={src} alt={title} />\n    <Box d=\"flex\" flexDirection=\"column\" p=\"1\">\n      <Box fontWeight=\"bold\">{title}</Box>\n      {description && <Box fontSize=\"sm\">{description}</Box>}\n    </Box>\n  </Box>\n)\n","import React, { useEffect, useState } from 'react'\nimport { ThemeProvider, Box, CSSReset } from '@chakra-ui/core'\n\nimport { Player, api } from './modules/deezer'\nimport { Card } from './components/card'\nimport { Album } from './modules/deezer/api/types'\n\nexport function App() {\n  const [tracks, setTracks] = useState<Array<Album>>([])\n\n  useEffect(() => {\n    api.artist.fetchArtistAlbums(8506054).then(r => setTracks((r as any).data))\n  }, [])\n\n  return (\n    <ThemeProvider>\n      <CSSReset />\n      <Box d=\"flex\" flexWrap=\"wrap\">\n        {tracks.map(track => (\n          <Card\n            m=\"3\"\n            key={track.id}\n            src={track.cover_medium}\n            title={track.title}\n          />\n        ))}\n      </Box>\n      <Box>\n        <Player px=\"2\" />\n      </Box>\n    </ThemeProvider>\n  )\n}\n","type InitOptions = {\n  appId: string\n  channelUrl: string\n  onload: () => void\n}\n\nconst DEEZER_SDK_CDN_LINK = 'https://e-cdns-files.dzcdn.net/js/min/dz.js'\nconst DEEZER_CONTAINER_ID = 'dz-root'\n\nconst initDeezer = ({ appId, channelUrl, onload }: InitOptions) => {\n  const dzRoot = document.createElement('div')\n\n  dzRoot.id = DEEZER_CONTAINER_ID\n  document.body.appendChild(dzRoot)\n\n  const script = document.createElement('script')\n\n  script.src = DEEZER_SDK_CDN_LINK\n\n  document.head.appendChild(script)\n  ;(window as any).dzAsyncInit = () => {\n    DZ.init({\n      appId,\n      channelUrl,\n      player: {\n        onload,\n      },\n    })\n  }\n}\n\nexport { Player } from './Player'\nexport { api } from './api'\n\nexport { initDeezer }\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Recognition } from './modules/recognition'\nimport { initDeezer } from './modules/deezer'\n\nimport { App } from './App'\n\nimport './index.css'\n\nconst appId = process.env.REACT_APP_DEEZER_APP_ID || ''\nconst channelUrl = window.location.href + 'channel.html' //TODO: May cause some routing issues in future, but for now it's okay\n\ninitDeezer({\n  appId,\n  channelUrl,\n  onload: () => {\n    ReactDOM.render(<App />, document.getElementById('root'))\n\n    const recognition = new Recognition()\n      .addCommand({ trigger: 'play', callback: DZ.player.play })\n      .addCommand({ trigger: 'stop', callback: DZ.player.pause })\n      .addCommand({ trigger: 'next', callback: DZ.player.next })\n      .addCommand({ trigger: 'previous', callback: DZ.player.prev })\n      .addCommand({\n        trigger: 'volume up',\n        callback: () => DZ.player.setVolume(DZ.player.getVolume() + 20),\n      })\n      .addCommand({\n        trigger: 'volume down',\n        callback: () => DZ.player.setVolume(DZ.player.getVolume() - 20),\n      })\n\n    recognition.addEventListener('result', event => {\n      console.log(event)\n    })\n\n    recognition.start()\n  },\n})\n"],"sourceRoot":""}